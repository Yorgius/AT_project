{% extends 'yarn_prices/base.html' %}


{% block head %}
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/drilldown.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

{% comment %} Стили графика {% endcomment %}
<style>
  #container {
    height: 400px;
  }

  .highcharts-figure,
  .highcharts-data-table table {
      min-width: 310px;
      max-width: 800px;
      margin: 1em auto;
  }
  
  .highcharts-data-table table {
      font-family: Verdana, sans-serif;
      border-collapse: collapse;
      border: 1px solid #ebebeb;
      margin: 10px auto;
      text-align: center;
      width: 100%;
      max-width: 500px;
  }
  
  .highcharts-data-table caption {
      padding: 1em 0;
      font-size: 1.2em;
      color: #555;
  }
  
  .highcharts-data-table th {
      font-weight: 600;
      padding: 0.5em;
  }
  
  .highcharts-data-table td,
  .highcharts-data-table th,
  .highcharts-data-table caption {
      padding: 0.5em;
  }
  
  .highcharts-data-table thead tr,
  .highcharts-data-table tr:nth-child(even) {
      background: #f8f8f8;
  }
  
  .highcharts-data-table tr:hover {
      background: #f1f7ff;
  }
</style>

{% endblock head %}


{% block content %}

{% comment %} charts containers {% endcomment %}
<div class="container text-center">
  <div class="row">
    <div class="col-sm-3">
        <div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">
                  Color 1
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                    Color 2
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                    Color 3
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                    Color 4
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                    Color 5
                </label>
            </div>
        </div>
        <button type="button" class="btn btn-light">Найти</button>
    </div>
    <div class="col">
        <div class="accordion" id="accordionExample">
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                  Цены на пряжу
                </button>
              </h2>
              <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    {% comment %} column chart {% endcomment %}
                    {% comment %} Price comparison chart for the current date among stores {% endcomment %}
                    <figure class="highcharts-figure">
                        <div id="column_chart" data-url="{% url 'yarn_prices_urls:column_chart_data' %}"></div>
                    </figure>
                    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
                    {% comment %} ajax request {% endcomment %}
                    <script>
                        $.ajax({
                        url: $("#column_chart").attr("data-url"),
                        dataType: 'json',
                        success: function (data) {
                            Highcharts.chart("column_chart", data);
                        }
                        });
                    </script>
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                  Динамика изменений цен
                </button>
              </h2>
              <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    {% comment %} basic line chart {% endcomment %}
                    {% comment %} dynamics of price changes over a period of time {% endcomment %}
                    <figure class="highcharts-figure">
                        <div id="basic_line_chart" data-url="{% url 'yarn_prices_urls:basic_line_chart_data' %}"></div>
                        <label for="customRange3" class="form-label">Динамика за</label>
                        <input type="range" class="form-range" min="1" max="3" step="1" id="customRange3">
                    </figure>
                    
                    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
                    {% comment %} ajax request {% endcomment %}
                    <script>
                        $.ajax({
                            url: $("#basic_line_chart").attr("data-url"),
                            dataType: 'json',
                            success: function (data) {Highcharts.chart("basic_line_chart", data);} 
                        });
                    </script>
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingThree">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    По цветовой палитре
                </button>
              </h2>
              <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                </div>
              </div>
            </div>
        </div>
    </div>
  </div>
</div>

{% endblock content %}